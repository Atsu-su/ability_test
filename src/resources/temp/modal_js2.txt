// ContactController.php
namespace App\Http\Controllers;

use App\Models\Contact;
use Illuminate\Http\Request;

class ContactController extends Controller
{
public function index()
{
$contacts = Contact::all();
return view('admin.contacts.index', compact('contacts'));
}

public function show($id)
{
$contact = Contact::findOrFail($id);
return response()->json($contact);
}
}

// web.php (routes)
Route::get('/admin/contacts', [ContactController::class, 'index'])->name('admin.contacts.index');
Route::get('/admin/contacts/{id}', [ContactController::class, 'show'])->name('admin.contacts.show');

// resources/js/app.js
document.addEventListener('DOMContentLoaded', function() {
const modal = document.querySelector('.admin-modal');
const detailButtons = document.querySelectorAll('.c-btn--admin-detail');

detailButtons.forEach(button => {
button.addEventListener('click', function(e) {
e.preventDefault();
const url = this.getAttribute('href');
fetch(url)
.then(response => response.json())
.then(data => {
updateModal(data);
modal.style.display = 'block';
});
});
});

function updateModal(data) {
document.querySelector('.admin-modal__table td:nth-child(1)').textContent = data.name;
document.querySelector('.admin-modal__table td:nth-child(2)').textContent = data.gender;
document.querySelector('.admin-modal__table td:nth-child(3)').textContent = data.email;
document.querySelector('.admin-modal__table td:nth-child(4)').textContent = data.phone;
document.querySelector('.admin-modal__table td:nth-child(5)').textContent = data.address;
document.querySelector('.admin-modal__table td:nth-child(6)').textContent = data.building;
document.querySelector('.admin-modal__table td:nth-child(7)').textContent = data.category;
document.querySelector('.admin-modal__table td:nth-child(8)').textContent = data.content;
}
});

// resources/views/admin/contacts/index.blade.php
@extends('layouts.base_with_header_admin')
@section('title', 'お問い合わせ')
@section('content')
<main>
  <!-- ... (前のコードは変更なし) ... -->
  <table class="admin__table">
    <thead>
      <tr>
        <th>お名前</th>
        <th>性別</th>
        <th>メールアドレス</th>
        <th>お問い合わせの種類</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      @foreach($contacts as $contact)
      <tr>
        <td>{{ $contact->name }}</td>
        <td>{{ $contact->gender }}</td>
        <td>{{ $contact->email }}</td>
        <td>{{ $contact->category }}</td>
        <td><a class="c-btn c-btn--admin-detail" href="{{ route('admin.contacts.show', $contact->id) }}">詳細</a></td>
      </tr>
      @endforeach
    </tbody>
  </table>
  <!-- ... (後のコードは変更なし) ... -->
</main>
<!-- モーダル部分は変更なし -->
@endsection